function loadDashboard() {
  $.ajax({
    url: "http://localhost:8080/BiteBudddy/AdminDashboardServlet",
    method: "GET",
    data: { action: "dashboard" },
    success: function (response) {
      let data = response; 
      if (typeof response === "string") {
        data = JSON.parse(response);
      }

      const dashboardHTML = `
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
          <div class="bg-white p-4 rounded-lg shadow text-center">
            <p class="text-gray-500">Total Users</p>
            <h2 class="text-2xl font-bold">${data.totalUsers}</h2>
          </div>
          <div class="bg-white p-4 rounded-lg shadow text-center">
            <p class="text-gray-500">Total Restaurants</p>
            <h2 class="text-2xl font-bold">${data.totalRestaurants}</h2>
          </div>
          <div class="bg-white p-4 rounded-lg shadow text-center">
            <p class="text-gray-500">Total Orders</p>
            <h2 class="text-2xl font-bold">${data.totalOrders}</h2>
          </div>
          <div class="bg-white p-4 rounded-lg shadow text-center">
            <p class="text-gray-500">Total Revenue</p>
            <h2 class="text-2xl font-bold">â‚¹${data.totalRevenue}</h2>
          </div>
        </div>

        <div class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-6">
          <div class="bg-white p-6 rounded-lg shadow">
            <h3 class="text-lg font-semibold mb-4">Monthly Revenue Trend</h3>
            <canvas id="revenueChart" height="200"></canvas>
          </div>

          <div class="bg-white p-6 rounded-lg shadow">
            <h3 class="text-lg font-semibold mb-4">Orders by Restaurant</h3>
            <canvas id="ordersChart" height="200"></canvas>
          </div>
        </div>
      `;
      $("#content-area").html(dashboardHTML);
      renderCharts(data);
    },
    error: function () {
      $("#content-area").html("<p class='text-center text-red-500'>Failed to load dashboard data.</p>");
    },
  });
}




      @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws IOException {
        resp.setContentType("application/json;charset=UTF-8");
        HttpSession session = req.getSession(false);


        if (session == null || session.getAttribute("user") == null) {
            resp.setStatus(HttpServletResponse.SC_UNAUTHORIZED);
            resp.getWriter().write("{\"error\":\"Not authenticated\"}");
            return;
        }


        Object userObj = session.getAttribute("user");
        if (userObj != null) {
            try {
                
                User u = (User) userObj;
                if (!"superadmin".equalsIgnoreCase(u.getRole())) {
                    resp.setStatus(HttpServletResponse.SC_FORBIDDEN);
                    resp.getWriter().write("{\"error\":\"Requires admin role\"}");
                    return;
                }
            } catch (Exception e) { 
            	e.printStackTrace();
            	}
        }

        String action = req.getParameter("action");
        if (action == null) action = "dashboard";

        try (PrintWriter out = resp.getWriter()) {
            if ("dashboard".equals(action)) {
               
            	DashboardResponse dashboard = adminService.getDashboard();
                out.write(gson.toJson(dashboard));

            } else if ("restaurants".equals(action)) {
                List<RestaurantDashboardModel> restaurants = adminService.getAllRestaurants();
                Map<String, Object> result = new HashMap<>();
                result.put("restaurants", restaurants);
                out.write(gson.toJson(result));
            } else if ("viewRestaurant".equals(action)) {
                int restaurantId = Integer.parseInt(req.getParameter("restaurantId"));
                Restaurant restaurant = adminService.getRestaurantDetails(restaurantId);

                if (restaurant == null) {
                    out.print(gson.toJson(new ErrorResponse("Restaurant not found")));
                    return;
                }

                String json = gson.toJson(restaurant);
                out.print(json);
            }
            else if("users".equals(action)){
            	
            	System.out.println("Msg from users in admindash boaras");
            	List<User> users = adminService.getAllUsers();
                Map<String, Object> data = new HashMap<>();
                data.put("users", users);

                String jsonResponse = gson.toJson(data);
                resp.getWriter().write(jsonResponse);
            }
            else if ("viewUser".equals(action)) {
                int userId = Integer.parseInt(req.getParameter("userId"));
                Map<String, Object> result = adminService.getUserDetails(userId);
                resp.getWriter().write(gson.toJson(result));
            }
            else {
            	resp.setStatus(HttpServletResponse.SC_BAD_REQUEST);
                out.write("{\"error\":\"Unknown action\"}");
            }
            
        } catch (Exception ex) {
            ex.printStackTrace();
            resp.setStatus(500);
            resp.getWriter().write("{\"error\":\"Server error\"}");
        }
    }
handle this if not authenticated show one sweet alert and redirect to login.html
